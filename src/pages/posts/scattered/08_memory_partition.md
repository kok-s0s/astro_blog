---
title: '内存分区：全局区、堆区、栈区、常量区、代码区'
---

在 C/C++ 编程中，内存分为多个区域来管理程序运行时的数据。这些内存区域主要包括全局区、堆区、栈区、常量区和代码区。以下是各个区域的详细说明：

1. **全局区（静态区）**：
   - 存储全局变量和静态变量。这些变量在程序开始时分配内存，并在程序结束后释放。
   - 全局变量和静态变量未初始化的部分会存放在 BSS（Block Started by Symbol）段，已初始化的变量会存放在数据段（Data Segment）。

2. **堆区**：
   - 堆区用于动态分配内存，程序员可以在运行时通过调用 `malloc()`、`new` 等函数分配内存，并通过 `free()`、`delete` 释放内存。
   - 堆区的内存管理由程序员负责，如果忘记释放内存，可能会导致内存泄漏。

3. **栈区**：
   - 栈区用于存储局部变量、函数参数、返回地址等。栈的内存分配由编译器自动管理，函数调用结束时会自动释放局部变量的内存。
   - 栈的大小通常有限，如果递归调用层数过多或局部变量占用内存过大，可能会导致栈溢出。

4. **常量区**：
   - 常量区用于存放常量数据，如字符串常量、const 修饰的全局常量等。常量区的内容在程序运行时不会改变。
   - 常量区的数据通常是只读的，尝试修改常量会导致运行时错误。

5. **代码区**：
   - 代码区用于存放程序的机器指令，即程序的可执行代码。代码区的内容在程序执行过程中不会改变，通常是只读的。
   - 代码区的大小在程序编译时确定。

### 内存分区图（通常的分布）：

```
+-------------------+
|   栈区 (Stack)    |  ← 向下增长
+-------------------+
|                   |
|     空闲区         |
|                   |
+-------------------+
|     堆区 (Heap)   |  ← 向上增长
+-------------------+
|     BSS 段        |
|                   |
+-------------------+
|   数据段 (Data)   |  (已初始化的全局变量和静态变量)
+-------------------+
|   代码区 (Text)   |
+-------------------+
```

每个区域都有其特定的用途和生命周期，合理使用这些区域有助于优化程序的内存管理。
